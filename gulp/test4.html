<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
	<title>Document</title>
</head>
<body>
	<button id="btn">播放</button>
	<script>
		var btn = document.getElementById('btn');
		btn.onclick = function() {
			testApp();
		}


		function testApp(url) { 
		  var $url = url || 'tudouni://tudouni/DnyDesc?did=877&type=0';
		  var timeout, t = 1000, hasApp = true; 
		  setTimeout(function () { 
		    if (hasApp) { 
		      alert('安装了app'); 
		    } else { 
		      alert('未安装app'); 
		    } 
		    document.body.removeChild(ifr); 
		  }, 2000) 
		 
		  var t1 = Date.now(); 
		  var ifr = document.createElement("iframe"); 
		  ifr.setAttribute('src', $url); 
		  ifr.setAttribute('style', 'display:none'); 
		  document.body.appendChild(ifr); 
		  timeout = setTimeout(function () { 
		     var t2 = Date.now(); 
		     if (!t1 || t2 - t1 < t + 100) { 
		       hasApp = false; 
		     } 
		  }, t); 
		} 
	</script>
</body>
</html>